<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Starbucks Rewards" />
  <meta name="theme-color" content="#00704A" />
  <title>Starbucks Rewards Offer - RewardUp</title>
  
  <!-- Preconnect for faster redirects -->
  <link rel="preconnect" href="https://cycsrd.mcgo2.com">
  <link rel="dns-prefetch" href="//cycsrd.mcgo2.com">
  <link rel="preconnect" href="https://connect.facebook.net">
  <link rel="dns-prefetch" href="//connect.facebook.net">
  
  <!-- Meta Tags for SEO -->
  <meta name="description" content="Get up to $100+ in Starbucks rewards by completing simple offers. Free drinks, food, and exclusive perks await!">
  <meta property="og:title" content="Starbucks Rewards Offer - RewardUp">
  <meta property="og:description" content="Get up to $100+ in Starbucks rewards by completing simple offers. Free drinks, food, and exclusive perks await!">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Starbucks Rewards Offer - RewardUp">
  <meta name="twitter:description" content="Get up to $100+ in Starbucks rewards by completing simple offers. Free drinks, food, and exclusive perks await!">

  <!-- META PIXEL TRACKING - Deferred for performance -->
  <script>
    // Defer Facebook Pixel loading
    window.addEventListener('load', function() {
      !function(f,b,e,v,n,t,s){
        if(f.fbq)return;n=f.fbq=function(){
          n.callMethod ? n.callMethod.apply(n,arguments) : n.queue.push(arguments)
        };
        if(!f._fbq)f._fbq=n;
        n.push=n;
        n.loaded=!0;
        n.version='2.0';
        n.queue=[];
        t=b.createElement(e);t.async=!0;t.src=v;
        s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)
      }(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');

      fbq('init','2324406347952889');
      fbq('track','PageView');
    });
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
         src="https://www.facebook.com/tr?id=2324406347952889&ev=PageView&noscript=1" />
  </noscript>

  <style>
    :root {
      /* Starbucks Green Theme */
      --primary-color: #00704A;
      --secondary-color: #1B1B1B;
      --accent-color: #D4AF37;
      --text-dark: #1B1B1B;
      --text-light: #ffffff;
      --background-color: #f0f0f0;
      --card-background: #ffffff;
      --progress-bg: #e0e0e0;
      --shadow-color: rgba(0,112,74,0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    body {
      background: var(--background-color);
      min-height: 100vh;
      min-height: 100dvh;
      position: relative;
      overflow-x: hidden;
      color: var(--text-dark);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      padding-top: max(20px, env(safe-area-inset-top, 20px));
      -webkit-overflow-scrolling: touch;
    }

    /* Particle background */
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: 1;
    }

    /* Main container */
    .landing-container {
      max-width: 480px;
      width: 100%;
      background: var(--card-background);
      border-radius: 20px;
      box-shadow: 0 10px 30px var(--shadow-color);
      position: relative;
      z-index: 2;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: cardFloat 3s ease-in-out infinite;
      margin-top: 20px;
    }

    @keyframes cardFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    /* Hero image - PERFORMANCE OPTIMIZED */
    .hero-image {
      width: 100%;
      height: 200px; /* Fixed height to prevent layout shift */
      border-radius: 20px 20px 0 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--primary-color);
      margin-bottom: 0;
      box-shadow: 0 4px 12px var(--shadow-color);
      position: relative;
      overflow: hidden;
    }

    .hero-image img {
      width: 120px;
      height: 120px;
      object-fit: contain;
      display: block;
    }

    /* Progress bar */
    .progress-container {
      margin: 16px;
      background: var(--card-background);
      padding: 12px 16px;
      border-radius: 12px;
      box-shadow: 0 2px 8px var(--shadow-color);
      border: 1px solid #eee;
    }

    .progress-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--progress-bg);
      border-radius: 4px;
      border: 1px solid #ddd;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
    }

    .progress-fill {
      height: 100%;
      background: var(--primary-color);
      width: 40%;
      border-radius: 4px;
      transition: width 0.3s ease;
      box-shadow: 0 0 6px var(--primary-color);
    }

    /* Headlines */
    .main-headline {
      font-size: 24px;
      font-weight: 800;
      text-align: center;
      margin: 16px;
      color: var(--primary-color);
      line-height: 1.2;
    }

    .sub-headline {
      font-size: 16px;
      font-weight: 500;
      color: var(--text-dark);
      text-align: center;
      margin: 0 16px 16px;
      line-height: 1.3;
    }

    .bounce-arrow {
      display: inline-block;
      animation: bounce 1s infinite;
      color: var(--primary-color);
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Instructions section */
    .instructions-container {
      margin: 16px;
      padding: 20px;
      background: var(--card-background);
      border-radius: 16px;
      box-shadow: 0 2px 8px var(--shadow-color);
      border: 1px solid #eee;
    }

    .instructions-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--primary-color);
      text-align: center;
    }

    .instruction-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .instruction-item:last-child {
      margin-bottom: 0;
    }

    .instruction-icon {
      width: 28px;
      height: 28px;
      margin-right: 12px;
      margin-top: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .instruction-icon-circle {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .instruction-text {
      font-size: 16px;
      font-weight: 600;
      line-height: 1.3;
      color: var(--text-dark);
    }

    .instruction-subtext {
      display: block;
      font-style: italic;
      font-weight: 400;
      margin-top: 4px;
      color: #666;
      font-size: 14px;
    }

    /* CTA Button */
    .cta-button {
      display: block;
      width: calc(100% - 32px);
      margin: 16px;
      background: var(--primary-color);
      color: var(--text-light);
      text-align: center;
      font-size: 18px;
      font-weight: 700;
      padding: 18px 0;
      border-radius: 50px;
      text-decoration: none;
      box-shadow: 0 8px 24px var(--primary-color);
      transition: all 0.3s ease;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      -webkit-appearance: none;
      appearance: none;
      min-height: 44px;
      -webkit-tap-highlight-color: rgba(0, 112, 74, 0.3);
    }

    /* Form fallback CTA for TikTok WebView reliability */
    .cta-form {
      display: none;
      width: calc(100% - 32px);
      margin: 16px;
    }

    .cta-form-button {
      width: 100%;
      background: var(--primary-color);
      color: var(--text-light);
      text-align: center;
      font-size: 18px;
      font-weight: 700;
      padding: 18px 0;
      border-radius: 50px;
      border: none;
      box-shadow: 0 8px 24px var(--primary-color);
      transition: all 0.3s ease;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      -webkit-appearance: none;
      appearance: none;
      min-height: 44px;
      -webkit-tap-highlight-color: rgba(0, 112, 74, 0.3);
      cursor: pointer;
    }

    .cta-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .cta-button:hover::before {
      left: 100%;
    }

    .cta-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 32px var(--primary-color);
      background: var(--secondary-color);
    }

    .cta-button:active {
      transform: translateY(-1px);
    }

    /* Testimonials section */
    .testimonials-container {
      margin: 16px;
    }

    .testimonials-header {
      text-align: center;
      font-size: 16px;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .testimonials-icon {
      width: 20px;
      height: 20px;
      background: var(--primary-color);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-light);
      font-weight: bold;
      font-size: 12px;
    }

    .testimonial-card {
      background: var(--card-background);
      border: 1px solid #eee;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px var(--shadow-color);
    }

    .testimonial-header {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }

    .testimonial-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 12px;
      object-fit: cover;
      border: 2px solid #fff;
      box-shadow: 0 2px 8px var(--shadow-color);
    }

    .testimonial-info {
      flex: 1;
    }

    .testimonial-username {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 2px;
    }

    .testimonial-time {
      font-size: 12px;
      color: #666;
    }

    .testimonial-text {
      font-size: 14px;
      line-height: 1.4;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .testimonial-amount {
      font-weight: 700;
      color: var(--primary-color);
    }

    .testimonial-engagement {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 12px;
      color: #666;
    }

    .engagement-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    /* Trust indicator */
    .trust-footer {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 16px;
      font-size: 14px;
      color: #666;
    }

    .trust-icon {
      margin-right: 8px;
      width: 16px;
      height: 16px;
    }

    /* Mobile notifications */
    .mobile-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-100%);
      background: rgba(0, 0, 0, 0.9);
      padding: 12px 16px;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      color: #ffffff;
      z-index: 1000;
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      max-width: 320px;
      width: calc(100% - 2rem);
    }

    .mobile-notification.show {
      transform: translateX(-50%) translateY(0);
    }

    .notification-icon-mobile {
      width: 32px;
      height: 32px;
      background: var(--primary-color);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 16px;
      flex-shrink: 0;
    }

    .notification-content {
      flex: 1;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 2px;
      color: #ffffff;
      font-size: 14px;
    }

    .notification-text {
      color: rgba(255, 255, 255, 0.8);
      font-size: 12px;
      line-height: 1.3;
    }

    /* Mobile responsiveness */
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      .landing-container {
        max-width: 100%;
      }
      
      .main-headline {
        font-size: 20px;
        margin: 12px;
      }
      
      .sub-headline {
        font-size: 14px;
        margin: 0 12px 12px;
      }
      
      .instructions-container {
        margin: 12px;
        padding: 16px;
      }
      
      .instruction-text {
        font-size: 14px;
      }
      
      .cta-button {
        width: calc(100% - 24px);
        margin: 12px;
        font-size: 16px;
        padding: 16px 0;
      }
      
      .testimonials-container {
        margin: 12px;
      }
    }

    @media (max-width: 380px) {
      .main-headline {
        font-size: 18px;
      }
      
      .instruction-text {
        font-size: 13px;
      }
      
      .cta-button {
        font-size: 15px;
        padding: 14px 0;
      }
    }

    /* TikTok WebView specific - prevent zoom on input focus */
    @media screen and (max-width: 480px) {
      input, textarea, select {
        font-size: 16px !important;
      }
    }
  </style>
</head>
<body>
  <!-- Particle background canvas -->
  <canvas id="particles-js"></canvas>

  <div class="landing-container">

    <!-- Hero image - PERFORMANCE OPTIMIZED -->
    <div class="hero-image">
      <img
        src="starbsheader.png"
        alt="Starbucks Logo"
        width="120"
        height="120"
        fetchpriority="high"
        loading="eager"
      />
    </div>

    <!-- Progress bar -->
    <div class="progress-container">
      <div class="progress-label">Starbucks Rewards Progress</div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>

    <!-- Main headlines -->
    <h1 class="main-headline">
      Follow the instructions below
    </h1>
    <div class="sub-headline">
      Earn up to $100+ in Starbucks rewards <span class="bounce-arrow">👇</span>
    </div>

    <!-- Instructions -->
    <div class="instructions-container">
      <div class="instructions-title">Quick Start Guide →</div>
      
      <div class="instruction-item">
        <div class="instruction-icon">
          <div class="instruction-icon-circle">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 12l3 3l7 -7" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        <div class="instruction-text">
          Complete 3-5 required offers
          <span class="instruction-subtext">Earn up to $100+ in Starbucks rewards</span>
        </div>
      </div>

      <div class="instruction-item">
        <div class="instruction-icon">
          <div class="instruction-icon-circle">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 12l3 3l7 -7" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        <div class="instruction-text">
          Provide a valid email address
          <span class="instruction-subtext">For instant Starbucks delivery!</span>
        </div>
      </div>

      <div class="instruction-item">
        <div class="instruction-icon">
          <div class="instruction-icon-circle">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M7 12l3 3l7 -7" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        <div class="instruction-text">
          Ensure you're 18 years or older
          <span class="instruction-subtext">Required</span>
        </div>
      </div>
    </div>

    <!-- CTA Button with cache buster -->
    <a
      href="https://cycsrd.mcgo2.com/click" + Date.now()
      class="cta-button"
      onclick="fbq('track', 'Lead');"
    >
      GET STARBUCKS REWARDS NOW
    </a>

    <!-- Form fallback CTA for TikTok WebView reliability -->
    <form action="https://cycsrd.mcgo2.com/click" method="get" class="cta-form" id="fallback-cta">
      <input type="hidden" name="cb" value="STARBUCKS">
      <input type="hidden" name="t" value="" id="timestamp">
      <button type="submit" class="cta-form-button" onclick="fbq('track', 'Lead');">
        GET STARBUCKS REWARDS NOW
      </button>
    </form>

    <!-- Testimonials -->
    <div class="testimonials-container">
      <div class="testimonials-header">
        <div class="testimonials-icon">☕</div>
        Recent Success Stories
      </div>

      <div class="testimonial-card">
        <div class="testimonial-header">
          <img src="https://i.pravatar.cc/64?img=1" alt="Profile" class="testimonial-avatar" loading="lazy">
          <div class="testimonial-info">
            <div class="testimonial-username">@jess_m23</div>
            <div class="testimonial-time">2h ago</div>
          </div>
        </div>
        <div class="testimonial-text">
          Started yesterday and already earned <span class="testimonial-amount">$127</span> in Starbucks rewards! Got my free latte today ✨
        </div>
        <div class="testimonial-engagement">
          <div class="engagement-item">
            <span>❤️</span>
            <span>89</span>
          </div>
          <div class="engagement-item">
            <span>💬</span>
            <span>23</span>
          </div>
        </div>
      </div>

      <div class="testimonial-card">
        <div class="testimonial-header">
          <img src="https://i.pravatar.cc/64?img=2" alt="Profile" class="testimonial-avatar" loading="lazy">
          <div class="testimonial-info">
            <div class="testimonial-username">@kate_r4</div>
            <div class="testimonial-time">5h ago</div>
          </div>
        </div>
        <div class="testimonial-text">
          Week 2 update: <span class="testimonial-amount">$156 total earned</span> in Starbucks rewards! Free breakfast every day 🎉
        </div>
        <div class="testimonial-engagement">
          <div class="engagement-item">
            <span>❤️</span>
            <span>156</span>
          </div>
          <div class="engagement-item">
            <span>💬</span>
            <span>34</span>
          </div>
        </div>
      </div>

      <div class="testimonial-card">
        <div class="testimonial-header">
          <img src="https://i.pravatar.cc/64?img=3" alt="Profile" class="testimonial-avatar" loading="lazy">
          <div class="testimonial-info">
            <div class="testimonial-username">@ryan_91</div>
            <div class="testimonial-time">1d ago</div>
          </div>
        </div>
        <div class="testimonial-text">
          Just completed my 3rd offer today! <span class="testimonial-amount">Made $93 this week</span> in Starbucks rewards 💰 This actually works! 🔥
        </div>
        <div class="testimonial-engagement">
          <div class="engagement-item">
            <span>❤️</span>
            <span>47</span>
          </div>
          <div class="engagement-item">
            <span>💬</span>
            <span>12</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Trust footer -->
    <div class="trust-footer">
      <div class="trust-icon">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="2" y="2" width="20" height="20" rx="6" fill="#00704A" />
          <text x="12" y="17" fill="#fff" font-size="13" font-family="Arial, sans-serif" text-anchor="middle">☕</text>
        </svg>
      </div>
      <span>Secure Starbucks Delivery</span>
    </div>
  </div>

  <script>
    // PERFORMANCE OPTIMIZED - Defer heavy operations
    (function() {
      'use strict';
      
      // Notification data
      const notificationData = {
        texts: [
          "Jessica just got $127 Starbucks reward!",
          "Kate earned $142 today!",
          "Ryan claimed $98!",
          "Lisa received $134!",
          "David got $89!"
        ],
        names: [
          'Jessica', 'Kate', 'Ryan', 'Lisa', 'David', 'Chris', 'Sara', 'Alex', 'Maria', 'James'
        ],
        amounts: [87, 92, 134, 156, 98, 127, 143, 89, 118, 105]
      };
      
      let notificationIndex = 0;
      let notificationCount = 0;
      const maxNotifications = 3;
      
      function createMobileNotification() {
        if (notificationCount >= maxNotifications) return;
        
        const notification = document.createElement('div');
        notification.className = 'mobile-notification';
        
        const randomName = notificationData.names[Math.floor(Math.random() * notificationData.names.length)];
        const randomAmount = notificationData.amounts[Math.floor(Math.random() * notificationData.amounts.length)];
        
        notification.innerHTML = `
          <div class="notification-icon-mobile">☕</div>
          <div class="notification-content">
            <div class="notification-title">Recent Claim</div>
            <div class="notification-text">${randomName} just claimed $${randomAmount}!</div>
          </div>
        `;
        
        document.body.appendChild(notification);
        notificationCount++;
        
        setTimeout(() => notification.classList.add('show'), 100);
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => {
            if (notification.parentNode) {
              notification.remove();
              notificationCount--;
            }
          }, 300);
        }, 5000);
      }
      
      // OPTIMIZED Particle animation system - Reduced complexity
      function initParticles() {
        const canvas = document.getElementById('particles-js');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        const particles = [];
        const particleCount = 8; // Reduced from 12
        const maxDistance = 80; // Reduced from 100
        const mousePos = { x: null, y: null };
        
        function setCanvasSize() {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
        
        setCanvasSize();
        
        // Throttled resize handler
        let resizeTimeout;
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(setCanvasSize, 100);
        });
        
        // Throttled mousemove handler
        let mouseTimeout;
        window.addEventListener('mousemove', (e) => {
          clearTimeout(mouseTimeout);
          mouseTimeout = setTimeout(() => {
            mousePos.x = e.clientX;
            mousePos.y = e.clientY;
          }, 16); // ~60fps
        });
        
        class Particle {
          constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.vx = (Math.random() - 0.5) * 0.4; // Reduced speed
            this.vy = (Math.random() - 0.5) * 0.4;
            this.radius = 1.5; // Reduced size
          }
          
          update() {
            this.x += this.vx;
            this.y += this.vy;
            
            if (this.x < 0 || this.x > canvas.width) this.vx = -this.vx;
            if (this.y < 0 || this.y > canvas.height) this.vy = -this.vy;
            
            if (mousePos.x !== null && mousePos.y !== null) {
              const dx = this.x - mousePos.x;
              const dy = this.y - mousePos.y;
              const distance = Math.sqrt(dx * dx + dy * dy);
              
              if (distance < 60) { // Reduced interaction distance
                const force = (60 - distance) / 60;
                this.x += dx * force * 0.01; // Reduced force
                this.y += dy * force * 0.01;
              }
            }
          }
          
          draw() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#00704A';
            ctx.fill();
          }
        }
        
        for (let i = 0; i < particleCount; i++) {
          particles.push(new Particle());
        }
        
        let animationId;
        let lastTime = 0;
        const targetFPS = 24; // Reduced from 30
        const frameInterval = 1000 / targetFPS;
        
        function animate(currentTime) {
          if (currentTime - lastTime >= frameInterval) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach((particle, i) => {
              particle.update();
              particle.draw();
              
              // Only check connections for every 3rd particle to improve performance
              if (i % 3 === 0) {
                for (let j = i + 1; j < particles.length; j++) {
                  const otherParticle = particles[j];
                  const dx = particle.x - otherParticle.x;
                  const dy = particle.y - otherParticle.y;
                  const distance = Math.sqrt(dx * dx + dy * dy);
                  
                  if (distance < maxDistance) {
                    ctx.beginPath();
                    ctx.moveTo(particle.x, particle.y);
                    ctx.lineTo(otherParticle.x, otherParticle.y);
                    const opacity = (1 - distance / maxDistance) * 0.1; // Reduced opacity
                    ctx.strokeStyle = `rgba(0, 112, 74, ${opacity})`;
                    ctx.lineWidth = 0.4; // Reduced line width
                    ctx.stroke();
                  }
                }
              }
            });
            
            lastTime = currentTime;
          }
          
          animationId = requestAnimationFrame(animate);
        }
        
        animate();
        
        return () => {
          if (animationId) {
            cancelAnimationFrame(animationId);
          }
        };
      }
      
      // TikTok WebView optimization: Show form fallback if anchor fails
      function setupTikTokWebViewOptimization() {
        const ctaButton = document.querySelector('.cta-button');
        const ctaForm = document.querySelector('.cta-form');
        const timestampInput = document.getElementById('timestamp');
        
        // Set timestamp for form
        if (timestampInput) {
          timestampInput.value = Date.now();
        }
        
        // If anchor link fails to work, show form fallback
        let anchorClicked = false;
        
        ctaButton.addEventListener('click', function(e) {
          anchorClicked = true;
          // If we're still here after a short delay, anchor probably failed
          setTimeout(() => {
            if (anchorClicked) {
              ctaButton.style.display = 'none';
              ctaForm.style.display = 'block';
            }
          }, 1000);
        });
        
        // Reset if user navigates back
        window.addEventListener('pageshow', function() {
          anchorClicked = false;
          ctaButton.style.display = 'block';
          ctaForm.style.display = 'none';
        });
      }
      
      // Initialize everything - DEFERRED for performance
      function init() {
        try {
          // Defer particle animation until after page load
          setTimeout(() => {
            const cleanupParticles = initParticles();
            
            // Cleanup on page unload
            window.addEventListener('beforeunload', () => {
              if (cleanupParticles) cleanupParticles();
            });
          }, 1000);
          
          // TikTok WebView optimizations
          setupTikTokWebViewOptimization();
          
          // Defer notification system
          setTimeout(() => {
            createMobileNotification();
            setInterval(createMobileNotification, Math.random() * 6000 + 12000);
          }, 3000);
          
        } catch (error) {
          console.warn('Initialization error:', error);
        }
      }
      
      // Wait for DOM to be ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>
</body>
</html>
